# Go在容器运行的注意事项

在容器环境下，Go程序获得的是宿主机的cpu核数，但即使容器和宿主机的cpu是共享的，但是在集群中也会针对k8s中的pod分配指定的核数，所以我们需要获取的是pod的核数而不是宿主机cpu的核数。

因为在GPM模型中，如果错误的设置了P，会导致M随着程序的运行不断增加最后使得程序延迟增大，程序响应缓慢。

## 解决方案

主动设置正确的GOMAXPROCS

使用uber-go/automaxprocs自动获取合适的核数。

